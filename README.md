# 这是什么？
这是一个FM随机音乐播放器
- [预览地址1](http://htmlpreview.github.io/?https://github.com/NathanYangcn/fm-music-player/blob/master/index.html)
- [预览地址2](http://htmlpreview.github.io/?https://github.com/NathanYangcn/fm-music-player/blob/master/history-version/v2.0.0/index.html)
- [历史版本](https://github.com/NathanYangcn/fm-music-player/tree/master/history-version)

# 实现了哪些功能？
1. 播放
2. 暂停
3. 切换曲目（因为随机性，所以只有切换下一首）
4. 频道切换
5. 音量控制
6. 歌曲进程控制
7. 歌词展示
8. 主体放大缩小
9. 快捷图标拖动

# 使用了哪些技术？
1. 原生JS
2. Web audio API
3. jsonp
4. jQuery
5. 面向对象
6. 组件化：拆分功能单独编写成模块
7. less
8. webpack
9. npm script

# 实现过程？
1. 了解学习Web audio API
2. 使用jQuery实现基本功能包括：暂停、播放、切换、音量控制、进程控制
3. 使用原生JS实现一个极简播放器，并扩展功能：使用音乐API与后端交互获取歌曲、频道资源，并实现频道切换
4. 使用jQuery改写所有功能
5. 拓展歌词功能：随音频进程的改变，滚动展示对应歌词
6. UI替换-HTML、CSS的建立
7. 使用面向对象写法修改JS文件
8. 使用less修改css文件
9. 使用webpack对文件进行编译、打包
10. 使用npm script使操作执行更为方便
11. 简单整理目录结构，将开发文件(src)与线上文件(public)分别存放，使文件结构清晰


# 遇到了哪些问题？
1. 歌词如何滚动展示
写写实现歌词滚动展示的思路把：
首先：和后台数据交互拿到歌词资源
其次：初始化资源，将歌词按格式 ‘["歌词时间","歌词内容"]’ 提取出来
	- 把每一句歌词全部分割开来
	- 遍历分割开的歌词，分别拿到其中的‘歌词时间’以及‘歌词内容’
	- 将‘歌词时间’转换为总秒数
	- 将‘歌词时间总秒数’和对应的‘歌词内容纯文本’放入最终结果歌词数组中，并重新排序 —————— 特定资源特定分析，这里只是处理我的歌词办法
第三：遍历最终结果歌词数组，拼接字符串放入页面中 —————— 歌词展示完成
第四：遍历‘歌词时间总秒数’，当音频时间(currentTime)，大于某句歌词时间&&小于下句歌词时间时，此时计算该句歌词高度，并展示出来 —————— 歌词滚动展示完成
歌词这里也可以计算单行高度，但是要保证所有歌词都是单行展示，且没有空字符串行，否则会出现歌词展示不正确的情况
2. 面向对象写法
这是一个熟练问题，需要适应这个写法，写啊写啊就会熟悉的，刚开始的我也是无从入手，在练习中照猫画虎找找套路：
使用原型或者立即执行函数都可以，按照写法格式改写即可，最后注意修改内部this的指代，这其实就是在封装代码
（自认为）既然面向过程时可以写出代码，那么在封装代码时我们也一定可以，因为这就是按照格式改写代码而已
3. webpack的配置以及使用
说好的博客还没写，后续会单独抽出一个目录，记录并整理我的webpack闯关过程
问题：引入jQuery后不起作用，报错信息为：$ 未定义
解决：配置全部完成且正确，当时花了很长时间排查这个错误，最后这个错误竟然是引入jQuery版本的问题，jQuery-1.9.1不支持，当更换一个新版本后立刻生效，问题就这样被解决了
4. less
问题：less编译后，页面元素排版错乱
解决：less允许使用嵌套语法，这样就缩短了书写css选择器的长度；
但less是需要编译的，编译后的文件中全部都是后代元素，并非直接子元素，如果选择直接子元素需要使用符号：& ，例：&>p（父级的直接子元素p）
使用伪类元素时需要使用符号：&

# 后续拓展方向
1. 列表播放功能
2. 播放历史记录
3. 适配移动端
4. 更多优化...

# 资料地址
1. [Web audio API](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLMediaElement)：API接口很多，挑出需要
2. [webpack官网](https://doc.webpack-china.org/)：当配置完成真正跑通的时候就会感觉很容易
3. [less语法](http://www.bootcss.com/p/lesscss/)
4. [我的文章总结：跨域获取资源](http://www.jianshu.com/p/0446b5bcdbab)：使用语法不同(原生JS?jQuery?)，写法也不同，但原理一致